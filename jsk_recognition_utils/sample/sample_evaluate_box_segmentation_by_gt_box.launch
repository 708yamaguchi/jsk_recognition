<launch>

  <arg name="gui" default="true" />

  <node name="transformable_interactive_server"
        pkg="jsk_interactive_marker" type="transformable_server_sample">
    <rosparam subst_value="true">
      display_interactive_manipulator: true
      display_interactive_manipulator_only_selected: true
    </rosparam>
  </node>
  <node name="transformable_boxes"
        pkg="jsk_interactive_marker" type="transformable_boxes_client.py"
        output="screen">
    <remap from="~server" to="transformable_interactive_server" />
    <rosparam subst_value="true">
      config_file: $(find jsk_recognition_utils)/sample/config/sample_evaluate_box_segmentation_by_gt_box.yaml
      config_auto_save: false  <!-- Use true to save config updated on rviz -->
    </rosparam>
  </node>
  <group if="$(arg gui)">
    <node name="rviz"
          pkg="rviz" type="rviz"
          args="-d $(find jsk_recognition_utils)/sample/config/sample_evaluate_box_segmentation_by_gt_box.rviz">
    </node>
  </group>

  <node name="boxes_to_gt_box"
        pkg="jsk_pcl_ros_utils" type="bounding_box_array_to_bounding_box">
    <remap from="~input" to="transformable_boxes/output/boxes" />
    <rosparam>
      index: 0
    </rosparam>
  </node>
  <node name="boxes_to_box"
        pkg="jsk_pcl_ros_utils" type="bounding_box_array_to_bounding_box">
    <remap from="~input" to="transformable_boxes/output/boxes" />
    <rosparam>
      index: 1
    </rosparam>
  </node>

  <node name="evaluate_box_segmentation_by_gt_box"
        pkg="jsk_recognition_utils" type="evaluate_box_segmentation_by_gt_box.py">
    <remap from="~input/box_gt" to="boxes_to_gt_box/output" />
    <remap from="~input/box" to="boxes_to_box/output" />
  </node>

</launch>
